import 'package:get/get.dart';
import 'package:hijri/hijri_calendar.dart';

class CalendarController extends GetxController {
  var currentDate = HijriCalendar.now().obs;
  var daysInMonth = 30.obs;
  var offsetDays = 0.obs;

  final arabicMonths = {
    1: "محرم",
    2: "صفر",
    3: "ربيع الأول",
    4: "ربيع الآخر",
    5: "جمادى الأولى",
    6: "جمادى الآخرة",
    7: "رجب",
    8: "شعبان",
    9: "رمضان",
    10: "شوال",
    11: "ذو القعدة",
    12: "ذو الحجة",
  };

  final imageNames = {
    1: "images/muharm.jpg",
    2: "images/safar.jpg",
    3: "images/rabee1.jpg",
    4: "images/rabee2.jpg",
    5: "images/jumada1.jpg",
    6: "images/jumada2.jpg",
    7: "images/rajab.jpg",
    8: "images/shaban.jpg",
    9: "images/ramadan.jpg",
    10: "images/shawal.jpg",
    11: "images/zukaade.jpg",
    12: "images/zualhje.jpg",
  };
  final hadiths = {
    1: '''عن أبي هريرة رضي اللّه عنه قال:قال رسولُ اللهِ ﷺ:\n«أفضلُ الصيامِ بعدَ رمضانَ شهرُ اللهِ المُحرَّمُ، وأفضلُ الصلاةِ بعدَ الفريضةِ صلاةُ الليلِ».\n رواه مسلم📘''',

    2: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«لا عَدْوَى، ولا طِيَرَةَ، ويُعْجِبُني الفألُ». قالوا: وما الفألُ؟ قالَ: «الكَلِمَةُ الطَّيِّبَةُ».\n متفق عليه📘''',

    3: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«مَن صلَّى علَيَّ واحدةً، صلَّى اللهُ عليهِ بها عشرًا».\n رواه مسلم📘''',

    4: '''عن عبدِ اللهِ بنِ مسعودٍ رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«كأنِّي أنظرُ إلى رسولِ اللهِ ﷺ يَحْكِي نبيًّا منَ الأنبياءِ، ضَرَبَهُ قومُهُ فأدمَوهُ، وهو يمسَحُ الدمَ عن وجهِه، ويقولُ: اللهمَّ اغفِرْ لقومي فإنهم لا يعلمونَ».\n متفق عليه📘''',

    5: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«مَن كانَ يُؤمِنُ باللهِ واليومِ الآخرِ، فليقلْ خيرًا أو ليصمُتْ، ومَن كانَ يُؤمِنُ باللهِ واليومِ الآخرِ، فليُكرِمْ جارَهُ، ومَن كانَ يُؤمِنُ باللهِ واليومِ الآخرِ، فليُكرِمْ ضيفَهُ».\n متفق عليه📘''',

    6: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«كلُّ سُلامى من الناسِ عليهِ صدقةٌ، كلُّ يومٍ تطلعُ فيهِ الشمسُ: تعدلُ بينَ اثنينِ صدقةٌ، وتعينُ الرجلَ في دابَّتِهِ فتحملُهُ عليها، أو ترفعُ لهُ عليها متاعَهُ صدقةٌ، والكلمةُ الطيبةُ صدقةٌ، وبكلِّ خطوةٍ تمشيها إلى الصلاةِ صدقةٌ، وتميطُ الأذى عنِ الطريقِ صدقةٌ».\n متفق عليه📘''',

    7: '''عن أبي بكرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«إنَّ الزمانَ قدِ استدارَ كهيئتِه يومَ خلقَ اللهُ السمواتِ والأرضَ، السنةُ اثنا عشرَ شهرًا، منها أربعةٌ حُرُمٌ: ثلاثٌ متوالياتٌ، ذو القعدةِ، وذو الحجةِ، والمحرَّمُ، ورجبُ مُضَرَ الذي بين جمادى وشعبانَ».\n متفق عليه📘''',

    8: '''عن عائشةَ رضيَ اللّهُ عنها قالت:\n«لَمْ يَكُنِ النَّبِيُّ ﷺ يَصُومُ شَهْرًا أَكْثَرَ مِنْ شَعْبَانَ، فَإِنَّهُ كَانَ يَصُومُ شَعْبَانَ كُلَّهُ، وَقَالَ: خُذُوا مِنَ الْعَمَلِ مَا تُطِيقُونَ، فَإِنَّ اللَّهَ لَا يَمَلُّ حَتَّى تَمَلُّوا، وَأَفْضَلُ الْعَمَلِ مَا دَاوَمَ عَلَيْهِ صَاحِبُهُ وَإِنْ قَلَّ».\n متفق عليه📘''',

    9: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«إذا جاء رمضانُ، فُتِّحَتْ أبوابُ الجنةِ، وغُلِّقَتْ أبوابُ النارِ، وصُفِّدَتِ الشياطينُ».\n متفق عليه📘''',

    10: '''عن أبي أيوب الأنصاري رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«مَن صام رمضانَ، ثم أتبَعَهُ ستًّا من شوَّالَ، كان كصيامِ الدَّهرِ».\n رواه مسلم📘''',

    11: '''عن أبي هريرة رضي اللّه عنه قال:\nقال رسولُ اللهِ ﷺ:\n«ما نقصَتْ صدقةٌ من مالٍ، وما زادَ اللهُ عبدًا بعفوٍ إلا عزًّا، وما تواضَعَ أحدٌ للهِ إلا رفعَهُ اللهُ».\n رواه مسلم📘''',

    12: '''عن عبدِ اللهِ بنِ عباسٍ رضي اللّه عنهما قال:\nقال رسولُ اللهِ ﷺ:\n«ما من أيامٍ العملُ الصالحُ فيها أحبُّ إلى اللهِ من هذه الأيامِ العشرِ». قالوا: يا رسولَ اللهِ، ولا الجهادُ في سبيلِ اللهِ؟ قال: «ولا الجهادُ في سبيلِ اللهِ، إلا رجلٌ خرج بنفسِه ومالِه، فلم يرجِعْ من ذلك بشيءٍ».\n رواه البخاري📘''',
  };

  @override
  void onInit() {
    super.onInit();
    updateMonthInfo();
  }

  void updateMonthInfo() {
    daysInMonth.value = currentDate.value.lengthOfMonth;

    HijriCalendar firstDay = HijriCalendar()
      ..hYear = currentDate.value.hYear
      ..hMonth = currentDate.value.hMonth
      ..hDay = 1;
    offsetDays.value = (firstDay.weekDay() % 7);
  }

  void nextMonth() {
    int m = currentDate.value.hMonth + 1;
    int y = currentDate.value.hYear;
    if (m > 12) {
      m = 1;
      y += 1;
    }
    currentDate.value = HijriCalendar()
      ..hYear = y
      ..hMonth = m
      ..hDay = 1;
    updateMonthInfo();
  }

  void previousMonth() {
    int m = currentDate.value.hMonth - 1;
    int y = currentDate.value.hYear;
    if (m < 1) {
      m = 12;
      y -= 1;
    }
    currentDate.value = HijriCalendar()
      ..hYear = y
      ..hMonth = m
      ..hDay = 1;
    updateMonthInfo();
  }

  void goToToday() {
    currentDate.value = HijriCalendar.now();
    updateMonthInfo();
  }

  bool isToday(int day) {
    final today = HijriCalendar.now();
    return currentDate.value.hYear == today.hYear &&
        currentDate.value.hMonth == today.hMonth &&
        day == today.hDay;
  }
}
